# Интерактивная карта Москвы

Сайт о самых интересных местах в Москве и за ее пределами с фотографиями, подробными описаниями и комментариями

[Демо сайта](http://petrovskydv.pythonanywhere.com/).
Тестовые данные взяты с сайта [KudaGo](https://kudago.com).

## Запуск

- Скачайте код
- Установите зависимости командой `pip install -r requirements.txt`
- Создайте файл базы данных и сразу примените все миграции командой `python3 manage.py migrate`
- Запустите сервер командой `python3 manage.py runserver`
- Откройте в браузере по [ссылке](http://127.0.0.1:8000/)

## Переменные окружения

Часть настроек проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` рядом с `manage.py` и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны 3 переменные:
- `DEBUG` — дебаг-режим. Поставьте True, чтобы увидеть отладочную информацию в случае ошибки.
- `SECRET_KEY` — секретный ключ проекта
- `ALLOWED_HOSTS` — список строк, представляющих имена хоста / домена, которые может обслуживать этот сайт. 
  
Ниже пример файла:
```
SECRET_KEY='SECRET_KEY'
DEBUG=true
ALLOWED_HOSTS=localhost,127.0.0.1,'xxx.pythonanywhere.com'
```

## Добавление локаций
Добавить новые локации можно из админки или с помощью management команды.

Пример команды: 
```
python manage.py load_place http://адрес/файла.json
```
Формат файла должен быть такой:
```json
{
    "title": "Площадка для свиданий на 60-м этаже Москва-Сити",
    "imgs": [
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/54ce8f26524cd9c4a3a0562c139c01d4.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/f8686aac60ff9a688cfcdd70b95975c0.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/27aebb147c5aac339e8ab43da3016db8.jpg"
    ],
    "description_short": "Погрузитесь в романтическую атмосферу и проведите незабываемый вечер в уютной комнате на головокружительной высоте!",
    "description_long": "<p>Хотите сделать так, чтобы свидание наверняка запомнилось вашей второй половинке? Думаете, чем ещё можно удивить любимого человека? Проведите свидание на 60-м этаже московского небоскрёба!</p>",
    "coordinates": {
        "lng": "37.541557",
        "lat": "55.74694299999997"
    }
}
```

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).
